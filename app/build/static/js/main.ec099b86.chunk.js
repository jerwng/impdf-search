(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){},43:function(e,t,a){e.exports=a(57)},48:function(e,t,a){},51:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(13),c=a.n(r),l=(a(48),a(35)),i=a.n(l),s=a(39),u=a(10),d=(a(51),a(36));var f=function(){return o.a.createElement(d.a,{bg:"dark",variant:"dark"},o.a.createElement(d.a.Brand,{href:"#home"},"Images PDF Searcher"))},h=a(15),m=a(30);a(54);function p(e){var t=!(e.file&&!e.loading);return o.a.createElement(h.a,{onSubmit:e.handleSubmit},o.a.createElement(h.a.Group,{id:"upload-pdf-file-form-group"},o.a.createElement("h3",{className:"inputs-label"},"Upload PDF File"),o.a.createElement(h.a.File,{id:"upload-pdf-file",label:e.file?e.file.name:"No File Selected",onChange:e.handleUpload,onMouseEnter:function(e){e.target.style.cursor="pointer"},onMouseLeave:function(e){e.target.style.cursor=""},accept:".pdf",custom:!0,key:e.file})),o.a.createElement("div",{id:"upload-pdf-file-button-container"},o.a.createElement(m.a,{id:"upload-pdf-file-delete-button",className:"upload-pdf-file-button",variant:"danger",onClick:e.handleDeleteFile,disabled:t},"Delete"),o.a.createElement(m.a,{id:"upload-pdf-file-upload-button",className:"upload-pdf-file-button",variant:"success",type:"submit",disabled:t},"Upload")))}function b(e){return o.a.createElement(h.a,{onSubmit:function(t){t.preventDefault();var a=void 0;""!==t.target[0].value&&(a=t.target[0].value),e.handleSetSearchWords(a)}},o.a.createElement(h.a.Group,{id:"search-words-form-group"},o.a.createElement("h3",{className:"inputs-label"},"Search Words"),o.a.createElement(h.a.Control,{id:"search-words-input",placeholder:"Enter Search Words",disabled:e.disabled})),o.a.createElement(m.a,{id:"search-words-button",variant:"success",type:"submit",disabled:e.disabled},"Search"))}var v=function(e){var t=Object(n.useState)(void 0),a=Object(u.a)(t,2),r=a[0],c=a[1];return o.a.createElement("div",{id:"inputs-container"},o.a.createElement(p,{handleUpload:function(e){var t=e.target.files[0];c(t)},handleSubmit:function(t){t.preventDefault(),e.handleUpload(r)},handleDeleteFile:function(){c(void 0),e.handleDeleteFileServer()},loading:e.loading,file:r}),o.a.createElement(b,{handleSetSearchWords:e.handleSetSearchWords,disabled:e.searchDisabled}))},E=a(40),g=a(24);a(38);function S(e){return o.a.createElement("img",{className:"image-thumbnail",src:"data:image/jpeg;base64, ".concat(e.photo),alt:"",onClick:function(){e.handleClick(e.id)},onMouseEnter:function(e){e.target.style.cursor="pointer"},onMouseLeave:function(e){e.target.style.cursor=""}})}var j=function(e){return o.a.createElement(E.a,{xs:"auto"}," ",e.photos.map(function(t,a){return o.a.createElement(g.a,{xs:"auto",key:a},o.a.createElement(S,{photo:t,id:a,handleClick:e.handleClick}))}))},P=a(31);var w=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)(function(){"undefined"!==typeof e.selectedPhotoID&&c(!0)},[e.selectedPhotoID]),o.a.createElement(P.a,{show:r,onHide:function(){c(!1),e.setSelectedPhotoID(void 0)},animation:!1},o.a.createElement(P.a.Header,{closeButton:!0}," Image "),o.a.createElement(P.a.Body,null,o.a.createElement("img",{className:"image-modal",src:"data:image/jpeg;base64, ".concat(e.selectedPhoto),alt:""})))},k=a(41),D=a(42);a(56);var O=function(e){var t,a;return e.show?t=o.a.createElement(k.a,{animation:"border"}):"undefined"!==typeof e.message&&(a=e.message,t=o.a.createElement(D.a,{variant:"danger"},a)),o.a.createElement("div",{className:"status"},t)};var y=function(){var e,t=Object(n.useState)({allPhotos:[],ocr:{}}),a=Object(u.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)([]),d=Object(u.a)(l,2),h=d[0],m=d[1],p=Object(n.useState)(void 0),b=Object(u.a)(p,2),E=b[0],g=b[1],S=Object(n.useState)(!1),P=Object(u.a)(S,2),k=P[0],D=P[1],y=Object(n.useState)(void 0),F=Object(u.a)(y,2),I=F[0],C=F[1],N=0,T=function(t){(function(e){return new Promise(function(t,a){fetch("https://impdf-searcher.herokuapp.com/results/".concat(e,"/"),{method:"GET"}).then(function(e){if(!e.ok)throw e;t(e.json())}).catch(function(e){a(e)})})})(t).then(function(t){"Finished"===t.status&&(clearInterval(e),c({allPhotos:t.photos,ocr:t.ocr}),m(t.photos),D(!1),C(void 0)),(N+=1)>30&&(clearInterval(e),D(!1),C("Timeout"),N=0)})},W=function(e){g(e)};return o.a.createElement("div",{className:"App"},o.a.createElement(f,null),o.a.createElement(v,{handleUpload:function(t){var a,n=new FormData;n.append("file",t),D(!0),(a=n,new Promise(function(e,t){fetch("https://impdf-searcher.herokuapp.com/pdf/",{method:"POST",body:a}).then(function(e){if(e.ok)return e.json();throw e}).then(function(t){e(t)}).catch(function(e){t(e)})})).then(function(t){N=0,e=setInterval(function(){return T(t.jobID)},1e4)})},handleSetSearchWords:function(e){var t="undefined"!==typeof e?e.split(" "):[];(function(e){return new Promise(function(t,a){fetch("https://impdf-searcher.herokuapp.com/search/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(e.ok)return e.json();throw e}).then(function(e){t(e)}).catch(function(e){a(e)})})})({allPhotos:r.allPhotos,ocr:r.ocr,searchWord:t}).then(function(e){m(e.photos)}).catch(function(){var e=Object(s.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,C(a.message);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},handleDeleteFileServer:function(){c({allPhotos:[],ocr:{}}),m([])},loading:k,searchDisabled:0===r.allPhotos.length}),o.a.createElement(j,{photos:h,handleClick:W}),o.a.createElement(w,{selectedPhoto:h[E],selectedPhotoID:E,setSelectedPhotoID:W}),o.a.createElement(O,{show:k,message:I}))},F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,59)).then(function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),o(e),r(e),c(e)})};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y,null)),document.getElementById("root")),F()}},[[43,1,2]]]);
//# sourceMappingURL=main.ec099b86.chunk.js.map