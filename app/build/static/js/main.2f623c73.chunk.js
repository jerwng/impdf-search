(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,n){},43:function(e,t,n){e.exports=n(57)},48:function(e,t,n){},51:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(13),r=n.n(c),i=(n(48),n(35)),l=n.n(i),u=n(39),d=n(10),s=(n(51),n(36));var f=function(){return o.a.createElement(s.a,{bg:"dark",variant:"dark"},o.a.createElement(s.a.Brand,{href:"#home"},"Images PDF Searcher"))},h=n(15),m=n(30);n(54);function p(e){var t=!(e.file&&!e.loading);return o.a.createElement(h.a,{onSubmit:e.handleSubmit},o.a.createElement(h.a.Group,{id:"upload-pdf-file-form-group"},o.a.createElement("h3",{className:"inputs-label"},"Upload PDF File"),o.a.createElement(h.a.File,{id:"upload-pdf-file",label:e.file?e.file.name:"No File Selected",onChange:e.handleUpload,onMouseEnter:function(e){e.target.style.cursor="pointer"},onMouseLeave:function(e){e.target.style.cursor=""},accept:".pdf",custom:!0,key:e.file})),o.a.createElement("div",{id:"upload-pdf-file-button-container"},o.a.createElement(m.a,{id:"upload-pdf-file-delete-button",className:"upload-pdf-file-button",variant:"danger",onClick:e.handleDeleteFile,disabled:t},"Delete"),o.a.createElement(m.a,{id:"upload-pdf-file-upload-button",className:"upload-pdf-file-button",variant:"success",type:"submit",disabled:t},"Upload")))}function b(e){return o.a.createElement(h.a,{onSubmit:function(t){t.preventDefault();var n=void 0;""!==t.target[0].value&&(n=t.target[0].value),e.handleSetSearchWords(n)}},o.a.createElement(h.a.Group,{id:"search-words-form-group"},o.a.createElement("h3",{className:"inputs-label"},"Search Words"),o.a.createElement(h.a.Control,{id:"search-words-input",placeholder:"Enter Search Words",disabled:e.disabled})),o.a.createElement(m.a,{id:"search-words-button",variant:"success",type:"submit",disabled:e.disabled},"Search"))}var v=function(e){var t=Object(a.useState)(void 0),n=Object(d.a)(t,2),c=n[0],r=n[1];return o.a.createElement("div",{id:"inputs-container"},o.a.createElement(p,{handleUpload:function(e){var t=e.target.files[0];r(t)},handleSubmit:function(t){t.preventDefault(),e.handleUpload(c)},handleDeleteFile:function(){r(void 0),e.handleDeleteFileServer()},loading:e.loading,file:c}),o.a.createElement(b,{handleSetSearchWords:e.handleSetSearchWords,disabled:e.searchDisabled}))},E=n(40),g=n(24);n(38);function S(e){return o.a.createElement("img",{className:"image-thumbnail",src:e.photo,alt:"",onClick:function(){e.handleClick(e.id)},onMouseEnter:function(e){e.target.style.cursor="pointer"},onMouseLeave:function(e){e.target.style.cursor=""}})}var D=function(e){return o.a.createElement(E.a,{xs:"auto"}," ",e.photos.map(function(t,n){return o.a.createElement(g.a,{xs:"auto",key:n},o.a.createElement(S,{photo:t,id:n,handleClick:e.handleClick}))}))},j=n(31);var w=function(e){var t=Object(a.useState)(!1),n=Object(d.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)(function(){"undefined"!==typeof e.selectedPhotoID&&r(!0)},[e.selectedPhotoID]),o.a.createElement(j.a,{show:c,onHide:function(){r(!1),e.setSelectedPhotoID(void 0)},animation:!1},o.a.createElement(j.a.Header,{closeButton:!0}," Image "),o.a.createElement(j.a.Body,null,o.a.createElement("img",{className:"image-modal",src:e.selectedPhoto,alt:"enlarged"})))},y=n(41),I=n(42);n(56);var P=function(e){var t,n;return e.show?t=o.a.createElement(y.a,{animation:"border"}):"undefined"!==typeof e.message&&(n=e.message,t=o.a.createElement(I.a,{variant:"danger"},n)),o.a.createElement("div",{className:"status"},t)},O="https://impdf-searcher.herokuapp.com";function k(e){return new Promise(function(t,n){fetch("".concat(O,"/delete/"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(!e.ok)throw e;t(e)}).catch(function(e){n(e)})})}var F=function(){var e,t=Object(a.useState)({allPhotos:[],ocr:{},fileID:void 0}),n=Object(d.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)([]),s=Object(d.a)(i,2),h=s[0],m=s[1],p=Object(a.useState)(void 0),b=Object(d.a)(p,2),E=b[0],g=b[1],S=Object(a.useState)(!1),j=Object(d.a)(S,2),y=j[0],I=j[1],F=Object(a.useState)(void 0),C=Object(d.a)(F,2),N=C[0],T=C[1],W=0,U=function(t){(function(e){return new Promise(function(t,n){fetch("".concat(O,"/results/").concat(e,"/"),{method:"GET"}).then(function(e){if(!e.ok)throw e;t(e.json())}).catch(function(e){n(e)})})})(t).then(function(t){"Finished"===t.status&&(clearInterval(e),r({allPhotos:t.photos,ocr:t.ocr,fileID:t.id}),m(t.photos),I(!1),T(void 0)),(W+=1)>30&&(clearInterval(e),I(!1),T("Timeout"),W=0)})},x=function(e){g(e)};return o.a.createElement("div",{className:"App"},o.a.createElement(f,null),o.a.createElement(v,{handleUpload:function(t){var n,a=new FormData;a.append("file",t),I(!0),"undefined"!==typeof c.fileID&&k({fileID:c.fileID}),(n=a,new Promise(function(e,t){fetch("".concat(O,"/pdf/"),{method:"POST",body:n}).then(function(e){if(e.ok)return e.json();throw e}).then(function(t){e(t)}).catch(function(e){t(e)})})).then(function(t){W=0,e=setInterval(function(){return U(t.jobID)},1e4)})},handleSetSearchWords:function(e){var t="undefined"!==typeof e?e.split(" "):[];0===t.length?m(c.allPhotos):function(e){return new Promise(function(t,n){fetch("".concat(O,"/search/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(e.ok)return e.json();throw e}).then(function(e){t(e)}).catch(function(e){n(e)})})}({ocr:c.ocr,searchWord:t,id:c.fileID}).then(function(e){m(e.photos)}).catch(function(){var e=Object(u.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:n=e.sent,T(n.message);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},handleDeleteFileServer:function(){"undefined"!==typeof c.fileID&&k({fileID:c.fileID}),r({allPhotos:[],ocr:{},fileID:void 0}),m([])},loading:y,searchDisabled:0===c.allPhotos.length}),o.a.createElement(D,{photos:h,handleClick:x}),o.a.createElement(w,{selectedPhoto:h[E],selectedPhotoID:E,setSelectedPhotoID:x}),o.a.createElement(P,{show:y,message:N}))},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then(function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),c(e),r(e)})};r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(F,null)),document.getElementById("root")),C()}},[[43,1,2]]]);
//# sourceMappingURL=main.2f623c73.chunk.js.map